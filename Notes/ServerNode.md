# Node Server

–î–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Å–µ—Ä–≤–µ—Ä–æ–º —Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º http —É Node.js –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–æ–¥—É–ª—å http.

### Request

–ü–∞—Ä–∞–º–µ—Ç—Ä request –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–∞–ø–∏—Ç —ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –æ–±'—î–∫—Ç http.IncomingMessage.\
–ó–∞–∑–Ω–∞—á–∏–º–æ –¥–µ—è–∫—ñ –æ—Å–Ω–æ–≤–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Ü—å–æ–≥–æ –æ–±'—î–∫—Ç–∞:
+ **headers**: –ø–æ–≤–µ—Ä—Ç–∞—î –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø–∏—Ç—É
+ **method**: —Ç–∏–ø –∑–∞–ø–∏—Ç—É (GET, POST, DELETE, PUT)
+ **url**: –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∑–∞–ø–∏—Ç—É–≤–∞–Ω—É –∞–¥—Ä–µ—Å—É

### Response

–ü–∞—Ä–∞–º–µ—Ç—Ä response –∫–µ—Ä—É—î –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è–º –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –æ–±'—î–∫—Ç http.ServerResponse.\
–°–µ—Ä–µ–¥ –π–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –≤–∏–¥—ñ–ª–∏—Ç–∏ —Ç–∞–∫—ñ –º–µ—Ç–æ–¥–∏:

+ **statusCode**: –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç—É—Å–Ω–∏–π –∫–æ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
+ **statusMessage**: –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫–µ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è —Ä–∞–∑–æ–º –∑—ñ —Å—Ç–∞—Ç—É—Å–Ω–∏–º –∫–æ–¥–æ–º
+ **setHeader(name, value)**: –¥–æ–¥–∞—î —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –æ–¥–∏–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫
+ **write**: –ø–∏—à–µ —É –ø–æ—Ç—ñ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–µ—è–∫–∏–π –≤–º—ñ—Å—Ç
+ **writeHead**: –¥–æ–¥–∞—î —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Å—Ç–∞—Ç—É—Å–Ω–∏–π –∫–æ–¥ —Ç–∞ –Ω–∞–±—ñ—Ä –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
+ **end**: —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î —Å–µ—Ä–≤–µ—Ä—É, —â–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —ñ —Ç—ñ–ª–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ, —É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –∫–ª—ñ—î–Ω—Ç–∞.

#### —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä—É

```javascript
 // app.js
const http = require("http");

http.createServer(function(request, response){
  // –º–µ—Ç–æ–¥ .createServer =>> –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç http.Server 
    // request =>> –∑–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–∞–ø–∏—Ç
    // response =>> –∫–µ—Ä—É—î –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    console.log("Url: " + request.url);
    console.log("–¢–∏–ø –∑–∞–ø–∏—Ç—É: " + request.method);
    console.log("User-Agent: " + request.headers["user-agent"]);
    console.log("–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤: ");
    console.log(request.headers);
    
    response.setHeader("UserId", 13);
    response.setHeader("Content-Type", "text/html");
    response.write("<!DOCTYPE html>");
    response.write("<html>");
    response.write("<head>");
      response.write("<meta charset=\"utf-8\" />");	
      response.write("<title>Hello Node.js</title>");
    response.write("</head>");
    response.write("<body><h2>–ü—Ä–∞—Ü—é—î–º–æ —ñ–∑ http —Å–µ—Ä–≤–µ—Ä–æ–º.</h2></body>");
    response.write("</html>");
    
	response.end("This is end of http!");
}).listen(3000);
```

> –ó–∞–ø—É—Å—Ç–∏–º–æ –π–æ–≥–æ —Ç–∞ –∑–≤–µ—Ä–Ω–µ–º–æ—Å—è —É –±—Ä–∞—É–∑–µ—Ä—ñ –∑–∞ –∞–¥—Ä–µ—Å–æ—é http://localhost:3000/


### –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–∞—î–º–æ —Ç–∞–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª—ñ–≤:

```go
üìÅ Node-Project/
‚îÇ
‚îú‚îÄ package.json
‚îú‚îÄ app.js
‚îÇ
‚îú‚îÄ üìÅ views/
‚îÇ   ‚îú‚îÄ index.html
‚îÇ   ‚îú‚îÄ about.html
‚îÇ
‚îú‚îÄ üìÅ public/
‚îÇ   ‚îú‚îÄ style.css
```

–†–µ–∞–ª—ñ–∑—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ —Ä—ñ–∑–Ω–∏—Ö html —Ñ–∞–π–ª—ñ–≤:

```javascript
  // app.js
  const http = require("http");
  const fs = require("fs");
  
  http.createServer(function(request, response){      
    console.log(`–ó–∞–ø—Ä–æ—à–µ–Ω–∞ –∞–¥—Ä–µ—Å–∞: ${request.url}`);	
    /*
	  —ñ–∑ request.url –º–∞—î–º–æ URL-–∞–¥—Ä–µ—Å—É, –Ω–∞ —è–∫—É –Ω–∞–¥—ñ–π—à–æ–≤ –∑–∞–ø–∏—Ç
	  .substr(1) –≤—ñ–¥—Å—ñ–∫–∞—î –ø–µ—Ä—à–∏–π —Å–∏–º–≤–æ–ª –∑ URL, —è–∫–∏–π –∑–∞–∑–≤–∏—á–∞–π —î —Å–ª–µ—à–µ–º ("/")
	  —Ç–∞–∫–∏–º —á–∏–Ω–æ–º –æ—Ç—Ä–∏–º—É—î–º–æ —à–ª—è—Ö –ø—ñ—Å–ª—è —Å–ª–µ—à—É
	*/
    const filePath = request.url.substr(1);
	  console.log(`–ó–∞–ø—Ä–æ—à–µ–Ω–∞ –∞–¥—Ä–µ—Å–∞: ${request.url}`);	  
    /* 
	   fs.access() –ø–µ—Ä–µ–≤—ñ—Ä—è—î –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—É –∑–∞ —à–ª—è—Ö–æ–º filePath
	   fs.constants.R_OK - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞, —è–∫–æ—é –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø—Ä–∞–≤–∞ –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É
	*/
    fs.access(filePath, fs.constants.R_OK, err => {
      // –Ø–∫—â–æ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø—Ä–∞–≤–∞, —Ç–æ –∫–æ–ª–±–µ–∫ –æ—Ç—Ä–∏–º–∞—î –ø–æ–º–∏–ª–∫—É.
        if(err){
            response.statusCode = 404;
            response.end("Resourse not found!");
        }
        else{
		  // –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ —á–∏—Ç–∞—é—á–æ–≥–æ –ø–æ—Ç–æ–∫—É —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å, —â–æ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –∫–ª—ñ—î–Ω—Ç—É
            fs.createReadStream(filePath).pipe(response);
        }
      });
  }).listen(3000, function(){
    console.log("Server started at 3000");
  });

  // npm start 
  // http://localhost:3000/views/index.html
  // http://localhost:3000/views/about.html
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞

–§—É–Ω–∫—Ü—ñ—è –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –≤ ``http.createServer()`` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –≤—Å—ñ—Ö HTTP-–∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤, –∞–ª–µ –Ω–µ —Ç—ñ–ª–∞ –∑–∞–ø–∏—Ç—É.
–ö—Ä—ñ–º —Ç–æ–≥–æ, —Å–∞–º –æ–±'—î–∫—Ç request —è–≤–ª—è—î —Å–æ–±–æ—é –ø–æ—Ç—ñ–∫, —è–∫–∏–π –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –æ–∫—Ä–µ–º–∏–º–∏ —á–∞–Ω–∫–∞–º–∏. 
–í—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —ñ–∑ –∑–∞–ø–∏—Ç—É –Ω–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –ø–æ—Ç—ñ–∫ —ñ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –≤–∏—Ç—è–≥—É–≤–∞—Ç–∏ —ó—Ö –æ—Ç—Ä–∏–º–∞–Ω—ñ —á–∞–Ω–∫–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

### –®–∞–±–ª–æ–Ω–∏

–ú–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ–º–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ - —à–∞–±–ª–æ–Ω–∏, –∑–∞–º—ñ—Å—Ç—å —è–∫–∏—Ö —Ñ–∞–π–ª –±—É–¥–µ –≤—Å—Ç–∞–≤–ª—è—Ç–∏—Å—è —è–∫–∏–π—Å—å –ø–µ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–º—ñ–Ω–∏–º–æ —Ñ–∞–π–ª about.html —Ç–∞–∫:
```html
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>–ü—Ä–æ —Å–∞–π—Ç</title>
    </head>
    <body>
      <h1>{header}</h1>
      <p>{message}</p>
    </body>
  </html>
```

–¢–æ–¥—ñ —É —Ñ–∞–π–ª—ñ node –Ω–∞–º –¥–æ–ø–æ–º–æ–∂–µ —Ç–∞–∫–∏–π –∫–æ–¥:
```javascript
  const http = require("http");
  const fs = require("fs");
 
  http.createServer(function(request, response){
     
    fs.readFile("index.html", "utf8", function(error, data){
        let header = "–°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ –≤–∞–∂–ª–∏–≤–µ";        
        let message = "–í–∏–≤—á–∞—î–º–æ Node.js"; 
        data = data.replace("{header}", header).replace("{message}", message);
        response.end(data);
    })
  }).listen(3000);
```

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, Node.js –Ω–µ –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó. –ó–∞–∑–≤–∏—á–∞–π –≤–æ–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤ —Ç–∏–ø—É Express.



